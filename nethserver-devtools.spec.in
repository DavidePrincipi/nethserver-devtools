Summary: NethServer tools for building RPMs
Name: nethserver-devtools
Version: @@VERSION@@
Release: @@RELEASE@@
License: GPL
Source: %{name}-%{version}.tar.gz
BuildArch: noarch
Requires: perl, perl(Test::Inline) >= 0.12, perl(XML::Parser), php-cli
BuildRequires: curl, php-cli

%description
Use "genfilelist" to create a filelist file with correct ownerships and
permissions.

%prep
%setup

%build
curl -sS https://getcomposer.org/installer | php
chmod +x composer.phar

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p ${RPM_BUILD_ROOT}/sbin/e-smith
mkdir -p ${RPM_BUILD_ROOT}/usr/bin
mkdir -p ${RPM_BUILD_ROOT}%{perl_vendorlib}/esmith/Build

cp -a root/etc ${RPM_BUILD_ROOT}/
cp -a root/sbin ${RPM_BUILD_ROOT}/
cp -a esmith ${RPM_BUILD_ROOT}%{perl_vendorlib}/

cp -v ./composer.phar ${RPM_BUILD_ROOT}/usr/bin/composer

%files
%defattr(-,root,root)
%attr(0755,root,root) /usr/bin/composer
%attr(0755,root,root) /sbin/e-smith/genfilelist
%attr(0755,root,root) /sbin/e-smith/buildtests
%attr(0755,root,root) /sbin/e-smith/validate-lexicon
%attr(0755,root,root) /sbin/e-smith/generate-lexicons
%attr(0755,root,root) /sbin/e-smith/update-po
%attr(-,root,root) %dir /sbin/e-smith
%attr(0644,root,root) %{perl_vendorlib}/esmith/Build/CreateLinks.pm
%attr(0644,root,root) /etc/rpm/macros.nethserver-devtools
%doc COPYING


%changelog
* Tue Mar 19 2013 Davide Principi <davide.principi@nethesis.it> - 1.0.1-1.ns6
- *.spec.in: fixed Release tag



